---
layout: single
title: "Mat 클래스."
categories: OpenCV-C++
tag: [OpenCV, Cpp]
toc: true
toc_sticky: true
---
### Mat 클래스
```c++
class Mat
{
public:
    Mat();
    Mat(int rows, int cols, int type);
    Mat(Size size, int type);
    Mat(int rows, int cols, int type, const Scalar& s);
    Mat(Size size, int type, const Scalar& s);
    Mat(const Mat& m);
    ~Mat();
    // Mat 클래스의 다양한 생성자와 소멸자입니다.

    void create(int rows, int cols, int type);
    bool empty() const;

    Mat clone() const;
    void copyTo(OutputArray m) const;
    Mat& setTo(InputArray value, InputArray mask=noArray());

    static MatExpr zeros(int rows, int cols, int type);
    static MatExpr ones(int rows, int cols, int type);

    Mat& operator = (const Mat& m);
    Mat operator() (const Rect& roi) const;

    template<typename _Tp> _Tp* ptr(int i0 = 0);
    template<typename _Tp> _Tp& at(int row, int col);
    // Mat 클래스의 멤버 함수입니다.
    // Mat 클래스의 멤버 함수에는 연산자 재정의 함수와 정적 멤버 함수도 포함합니다.

    int dims;
    int rows, cols;
    uchar* data;
    MatSize size;
    // Mat 클래스의 주요 멤버 변수입니다.
    ... // 생략
};
```

```c++
Mat::Mat(int rows, int cols, int type);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- type : 새로 만들 행렬의 타입  

```c++
Mat::Mat(Size size, int type);
```
- size : 새로 만들 행렬의 크기. Size(cols, rows) 또는 Size(width, height)  
- type : 새로 만들 행렬의 타입  

```c++
Mat::Mat(int rows, int cols, int type, const Scalar& s);
Mat::Mat(Size size, int type, const Scalar& s);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- size : 새로 만들 행렬의 크기  
- type : 새로 만들 행렬의 타입  
- s : 행렬 원소 초깃값  

```c++
static MatExpr Mat::zeros(int rows, int cols, int type);
static MatExpr Mat::zeros(Size size, int type);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- size : 새로 만들 행렬의 크기  
- type : 새로 만들 행렬의 타입  
- 반환값 : 모든 원소가 0으로 초기화된 행렬 표현식  

```c++
static MatExpr Mat::ones(int rows, int cols, int type);
static MatExpr Mat::ones(Size size, int type);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- size : 새로 만들 행렬의 크기  
- type : 새로 만들 행렬의 타입  
- 반환값 : 모든 원소가 1로 초기화된 행렬 표현식  

```c++
static MatExpr Mat::eye(int rows, int cols, int type);
static MatExpr Mat::eye(Size size, int type);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- size : 새로 만들 행렬의 크기  
- type : 새로 만들 행렬의 타입  
- 반환값 : 단위 행렬을 표현하는 행렬 표현식  

```c++
Mat::Mat(int rows, int cols, int type, void *data, size_t step = AUTO_STEP);
Mat::Mat(Size size, int type, void *data, size_t step = AUTO_STEP);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- size : 새로 만들 행렬의 크기  
- type : 새로 만들 행렬의 타입  
- data : 사용할 (외부) 행렬 데이터의 주소, 외부 데이터를 사용하여 Mat 객체를 생성할 경우, 생성자에서 원소 데이터 저장을 위한 메모리 공간을 동적으로 할당하지 않습니다.  
- step : (외부) 행렬 데이터에서 한 행이 차지하는 바이트 수, 만약 외부 행렬 데이터의 각 행에 여분의 패딩 바이트(padding byte)가 존재한다면 명시적으로 지정해야 합니다. 만약 기본값 AUTO_STEP을 사용하면 패딩 바이트가 없다고 간주합니다.

```c++
void Mat::create(int rows, int cols, int type);
void Mat::create(Size size, int type);
```
- rows : 새로 만들 행렬의 행 개수(영상의 세로 크기)  
- cols : 새로 만들 행렬의 열 개수(영상의 가로 크기)  
- size : 새로 만들 행렬의 크기  
- type : 새로 만들 행렬의 타입  

```c++
Mat& Mat::operator = (const Scalar& s);
```
- s : 행렬 원소에 설정할 값  
- 반환값 : 값이 설정된 Mat 객체의 참조  

```c++
Mat& Mat::setTo(InputArray value, InputArray mask = noArray());
```
- value : 행렬 원소에 설정할 값  
- mask : 마스크 행렬, 마스크 행렬의 원소가 0이 아닌 위치에서만 value 값이 설정됩니다. 행렬 전체 원소 값을 설정하려면 noArray() 또는 Mat()을 지정합니다.  
- 반환값 : Mat 객체의 참조  

```c++
Mat Mat::clone() const;
```
- 반환값 : *this 행렬의 복사본  

```c++
void Mat::copyTo(OutputArray m) const;
void Mat::copyTo(OutputArray m, InputArray mask) const;
```
- m : 복사본이 저장될 행렬. 만약 *this 행렬과 크기 및 타입이 다르면 메모리를 새로 할당한 후 픽셀 값을 복사합니다.  
- mask : 마스크 행렬. 마스크 행렬의 원소 값이 0이 아닌 좌표에서만 행렬 원소를 복사합니다.  

```c++
Mat Mat::operator()(const Rect& roi) const;
Mat Mat::operator()(Range rowRange, Range colRange) const;
```
- roi : 사각형 관심 영역  
- rowRange : 관심 행 범위  
- colRange : 관심 열 범위  
- 반환값 : 추출한 부분 행렬 또는 영상. 부분 영상의 픽셀 데이터를 서로 공유합니다.  

```c++
Mat Mat::rowRange(int startrow, int endrow) const;
Mat Mat::rowRange(const Range& r) const;
```
- startrow : 추출할 행 범위 시작 번호(포함)  
- endrow : 추출할 행 범위 끝 번호(불포함)  
- r : 추출할 행 범위  
- 반환값 : 지정한 행 범위에 해당하는 행렬  

```c++
Mat Mat::colRange(int startrow, int endrow) const;
Mat Mat::colRange(const Range& r) const;
```
- startrow : 추출할 행 범위 시작 번호(포함)  
- endrow : 추출할 행 범위 끝 번호(불포함)  
- r : 추출할 행 범위  
- 반환값 : 지정한 행 범위에 해당하는 행렬  

```c++
Mat Mat::row(int y) const;
Mat Mat::col(int y) const;
```
- y : 부분 행렬로 추출할 행 번호  
- x : 부분 행렬로 추출할 열 번호  
- 반환값 : 추출한 부분 행렬(얕은 복사)  

```c++
template<typename _Tp> _Tp& Mat::at(int y, int x)
```
- y : 참조할 행 번호  
- x : 참조할 열 번호  
- 반환값 : (_Tp& 타입으로 형 변환된) y번째 행, x번째 열의 원소 값(참조)

```c++
template<typename _Tp>
_Tp* Mat::ptr(int y)
```
- y : 참조할 행 번호  
- 반환값 : (_Tp* 타입으로 형 변환된) y번째 행의 시작 주소  
